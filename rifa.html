<!DOCTYPE html>
<html lang="es-AR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Rifa Reyes 2026 - Bicicleta Rodado 29 | Parroquia San Luis Gonzaga Villa Elisa</title>
    <meta name="description" content="¬°Particip√° de la Rifa Reyes 2026! Gan√° una bicicleta rodado 29 y ayud√° a nuestra parroquia. Reserv√° tu n√∫mero online. Sorteo: 22 de diciembre. Villa Elisa, La Plata.">
    <meta name="keywords" content="rifa parroquia, rifa Reyes 2026, bicicleta rodado 29, rifa online, villa elisa, la plata, san luis gonzaga, rifa solidaria, sorteo Reyes">
    <meta name="author" content="Parroquia San Luis Gonzaga">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sanluisgonzaga.ar/rifa.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sanluisgonzaga.ar/rifa.html">
    <meta property="og:title" content="üéÅ Rifa Reyes 2026 - Bicicleta Rodado 29 | Parroquia San Luis Gonzaga">
    <meta property="og:description" content="¬°Particip√° y gan√° una bicicleta rodado 29! Reserv√° tu n√∫mero online. Sorteo: 6 de enero. Ayud√° a nuestra parroquia. üëëüëëüëë">
    <meta property="og:image" content="https://sanluisgonzaga.ar/img/preview-rifa.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Rifa Reyes 2026 - Bicicleta Rodado 29 - Parroquia San Luis Gonzaga">
    <meta property="og:site_name" content="Parroquia San Luis Gonzaga">
    <meta property="og:locale" content="es_AR">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://sanluisgonzaga.ar/rifa.html">
    <meta name="twitter:title" content="üéÅ Rifa Reyes 2026 - Bicicleta Rodado 29">
    <meta name="twitter:description" content="¬°Particip√° y gan√°! Reserv√° tu n√∫mero online. Sorteo: 6 de enero üëëüëëüëë">
    <meta name="twitter:image" content="https://sanluisgonzaga.ar/img/preview-rifa.jpg">
    <meta name="twitter:image:alt" content="Rifa Reyes 2026 - Parroquia San Luis Gonzaga">
    
    <!-- Geo Tags -->
    <meta name="geo.region" content="AR-B">
    <meta name="geo.placename" content="Villa Elisa, La Plata">
    <meta name="geo.position" content="-34.8525;-58.0897">
    <meta name="ICBM" content="-34.8525, -58.0897">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Custom CSS & Theme -->
    <link rel="stylesheet" href="../style.css">
    <link href="css/agency.min.css" rel="stylesheet">
    <link href="css/new_styles.css" rel="stylesheet">

    <!-- AOS & Additional Libraries -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<!-- link de toggleTailwind eliminado o reemplazado por el correcto si es necesario -->
<!-- Tailwind CSS CDN -->
<!-- <script src="https://cdn.tailwindcss.com"></script> -->
<!-- Inclu√≠ esto en el <head> si a√∫n no est√° -->

<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">
 
  <!-- Material Design 3 -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  
<!-- SweetAlert2 CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
  
  <!-- JSON-LD Schema para SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "Rifa Reyes 2026 - Bicicleta Rodado 29",
    "description": "Particip√° de la rifa solidaria de nuestra parroquia. gi: Bicicleta rodado 29. Reserv√° tu n√∫mero online.",
    "image": "https://sanluisgonzaga.ar/img/preview-rifa.jpg",
    "startDate": "2025-12-01",
    "endDate": "2026-01-06",
    "eventStatus": "https://schema.org/EventScheduled",
    "eventAttendanceMode": "https://schema.org/OnlineEventAttendanceMode",
    "location": {
      "@type": "Place",
      "name": "Parroquia San Luis Gonzaga",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Villa Elisa",
        "addressLocality": "La Plata",
        "addressRegion": "Buenos Aires",
        "addressCountry": "AR"
      }
    },
    "organizer": {
      "@type": "Organization",
      "name": "Parroquia San Luis Gonzaga",
      "url": "https://sanluisgonzaga.ar"
    },
    "offers": {
      "@type": "Offer",
      "url": "https://sanluisgonzaga.ar/rifa.html",
      "price": "20000",
      "priceCurrency": "ARS",
      "availability": "https://schema.org/InStock"
    }
  }
  </script>

</head>
<body id="inicio">
<link rel="stylesheet" href="./rifa.css">

    <!-- Antes del cierre del body -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>  AOS.init(); </script>

    <!-- Bot√≥n Flotante con Imagen -->
<a href="#inicio" class="btn-floating">
    <!-- <img src="./rifa//rifi.hijos.png"  alt="Contacto"> -->
        <img src="./rifa/flot-rifa.gif"  alt="Contacto">

</a>

<section class="cabecera" style="background-color: #0d6efd; width: 100vw; margin: 0 auto;"> 
  <div class="container" style="width: 100%; max-width: 100vw; padding: 0;">
    <nav class="navbar navbar-expand-lg navbar-dark shadow" style="width: 100%;">
      <div class="container d-flex align-items-center" style="width: 100%;">
        <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button> -->
        <!-- Logo y T√≠tulo -->
        <a class="navbar-brand d-flex align-items-center gap-2" 
        href="./index.html" 
        style="gap: 1.2rem;">
        <img src="./rifa/logo-rifa.png" alt="Logo San Luis Gonzaga" height="80" 
        class="me-2 logo" style="display: block;">
        <style>
        @media (max-width: 600px) {
          .navbar-brand .logo {
            height: 80px !important;
            max-height: 80px !important;
          }
        }
        </style>
        <div class="titulo-ppal d-flex flex-column justify-content-center" 
        style="padding-top:0.8em">
          <span class="linea1 fs-7 text-center" style="font-family: 'amarillo', 'Arial Rounded MT Bold', Arial, sans-serif; font-size: 1.1rem; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);">San Luis Gonzaga</span>
          <span class="linea2 fs-7 d-md-none text-center" style="font-size: 0.985rem; padding-top: .3em; color: #b8dbf7 !important; display: block;">
            Villa Elisa, La Plata, Argentina
          </span>
          <!-- <style>
          @media (max-width: 600px) {
            .linea1 {
              margin: 0!important;
              padding: 0px!important;
              font-size: 0.9rem !important;
              text-align: center !important;
              display: block;
            }
          }
          </style> -->
          <link href="https://fonts.cdnfonts.com/css/amarillo" rel="stylesheet">
          <style>
          @import url('https://fonts.cdnfonts.com/css/amarillo');
          </style>
          <span class="linea2 fs-7 d-none d-md-block" style="font-size: 0.985rem; padding-top: .3em; 
          color: #b8dbf7 !important;">Villa Elisa, La Plata, Argentina</span>
        </div>
        </a>

        <!-- Opciones de Navegaci√≥n -->
        <a href="./index.html" class="btn btn-light d-flex align-items-center" 
          style="color: #0d6efd; border-radius: 50%; padding: 0.5em 0.6em; box-shadow: 0 2px 6px rgba(0,0,0,0.628);" aria-label="Volver al inicio">
          <i class="fas fa-arrow-left"></i>
        </a>
      </div>
    </nav>
  </div>
</section>




<section id="Rifa"  class="section-header">

    <h2 class="md3-headline" style="color: white;">
        <i class="fas fa-ticket-alt align-middle" style="font-size: 1.3em; vertical-align: middle; margin-right: 0.4em;"></i>
        <span style="vertical-align: middle;">Rifa  online  <span class="d-md-none"><br></span> √≥ por secretar√≠a</span>  
        <!-- <i class="fas fa-tree align-middle" style="font-size: 1.3em; vertical-align: middle; margin-right: 0.4em;" aria-hidden="true" title="√Årbol de Reyes"></i> -->
    </h2>
</section>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rifa Solidaria - San Luis Gonzaga</title>
  
  <!-- Material Design 3 -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --md-sys-color-primary: #6750A4;
      --md-sys-color-on-primary: #FFFFFF;
      --md-sys-color-primary-container: #EADDFF;
      --md-sys-color-surface: #FFFBFE;
      --md-sys-color-surface-variant: #E7E0EC;
      --md-sys-color-outline: #79747E;
      --md-sys-color-error: #B3261E;
      --md-sys-color-success: #4CAF50;
      --md-sys-color-warning: #FF9800;
    }

    .rifa-section {
      background: #f8f9fa;
      padding: 20px 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }

    .card {
      background: var(--md-sys-color-surface);
      border-radius: 28px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12);
      padding: 32px;
      animation: slideUp 0.4s ease-out;
      margin-bottom: 20px;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Header con premios y pago */
    .prize-payment-header {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 24px;
    }

    .prizes-section {
      text-align: center;
    }

    .prize-item {
      color: var(--md-sys-color-primary);
      font-size: 24px;
      font-weight: 500;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .payment-card {
      background: #f5f5f5;
      padding: 20px;
      border-radius: 16px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 20px;
      align-items: center;
    }

    .payment-details {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .payment-row {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .payment-row strong {
      color: #073767;
      font-size: 14px;
    }

    .payment-row span {
      color: #0066CC;
      font-size: 16px;
      font-weight: 500;
      user-select: all;
      word-break: break-all;
    }

    .qr-section {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .qr-section img {
      max-width: 180px;
      width: 100%;
      border-radius: 12px;
      background: white;
      padding: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .rifa-image {
      display: flex;
      justify-content: center;
      margin-bottom: 16px;
    }

    .rifa-image img {
      max-width: 200px;
      border-radius: 18px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.10);
    }

    .subtitle {
      color: var(--md-sys-color-outline);
      margin-bottom: 16px;
      text-align: center;
      font-size: 16px;
    }

    .mode-toggle {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .md-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      border: none;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Roboto', sans-serif;
      text-decoration: none;
    }

    .md-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    }

    .btn-primary {
      background: var(--md-sys-color-primary);
      color: var(--md-sys-color-on-primary);
    }

    .btn-secondary {
      background: transparent;
      color: var(--md-sys-color-primary);
      border: 2px solid var(--md-sys-color-primary);
    }

    .btn-mercadopago {
      background: #00b1ea;
      color: white;
    }

    .btn-google {
      background: white;
      color: #333;
      border: 1px solid #ddd;
    }

    .btn-facebook {
      background: #1877F2;
      color: white;
    }

    .btn-logout {
      background: var(--md-sys-color-error);
      color: white;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 2px solid var(--md-sys-color-surface-variant);
      flex-wrap: wrap;
      gap: 16px;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .user-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid var(--md-sys-color-primary);
    }

    .admin-badge {
      display: inline-block;
      background: var(--md-sys-color-primary-container);
      color: var(--md-sys-color-primary);
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 500;
      margin-top: 4px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--md-sys-color-surface-variant);
      padding: 16px;
      border-radius: 16px;
      text-align: center;
    }

    .stat-card .number {
      font-size: 32px;
      font-weight: 700;
      color: var(--md-sys-color-primary);
    }

    .stat-card .label {
      font-size: 12px;
      color: var(--md-sys-color-outline);
      margin-top: 4px;
    }

    .rifa-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
      gap: 10px;
    }

    .numero-card {
      aspect-ratio: 1;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
      font-weight: 500;
      position: relative;
    }

    .numero-card:hover:not(.disabled) {
      transform: scale(1.08);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    .numero-card.disponible {
      background: var(--md-sys-color-success);
      color: white;
    }

    .numero-card.reservado {
      background: var(--md-sys-color-warning);
      color: white;
    }

    .numero-card.pagado {
      background: var(--md-sys-color-primary);
      color: white;
    }

    .numero-card.disabled {
      cursor: not-allowed;
      opacity: 0.8;
    }

    .numero-card .numero {
      font-size: 20px;
      font-weight: 700;
    }

    .numero-card .estado {
      font-size: 8px;
      margin-top: 2px;
      text-transform: uppercase;
    }

    .numero-card .nombre-mini {
      font-size: 7px;
      margin-top: 2px;
      opacity: 0.9;
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      padding: 0 2px;
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: var(--md-sys-color-surface);
      border-radius: 24px;
      padding: 24px;
      max-width: 500px;
      width: 100%;
      animation: slideUp 0.3s;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-header h3 {
      font-size: 20px;
      color: var(--md-sys-color-primary);
      margin: 0;
    }

    .close-btn {
      background: none;
      border: none;
      cursor: pointer;
      color: var(--md-sys-color-outline);
      font-size: 28px;
      line-height: 1;
      padding: 0;
      width: 32px;
      height: 32px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--md-sys-color-outline);
      font-size: 14px;
      font-weight: 500;
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--md-sys-color-outline);
      border-radius: 12px;
      font-size: 16px;
      font-family: 'Roboto', sans-serif;
      transition: border 0.2s;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--md-sys-color-primary);
    }

    .modal-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 20px;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: var(--md-sys-color-outline);
    }

    .spinner {
      border: 3px solid var(--md-sys-color-surface-variant);
      border-top: 3px solid var(--md-sys-color-primary);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .login-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-width: 400px;
      margin: 0 auto;
    }

    .info-box {
      background: var(--md-sys-color-primary-container);
      border-left: 4px solid var(--md-sys-color-primary);
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .info-box p {
      color: var(--md-sys-color-primary);
      margin: 0;
      font-size: 13px;
      line-height: 1.4;
    }

    .btn-group-mobile {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .card {
        padding: 20px;
        border-radius: 20px;
      }

      .prize-item {
        font-size: 18px;
      }

      .payment-card {
        grid-template-columns: 1fr;
        padding: 16px;
        gap: 16px;
      }

      .payment-row strong {
        font-size: 12px;
      }

      .payment-row span {
        font-size: 14px;
      }

      .qr-section img {
        max-width: 160px;
      }

      .rifa-image img {
        max-width: 150px;
      }

      .stats {
        gap: 8px;
      }

      .stat-card {
        padding: 12px;
      }

      .stat-card .number {
        font-size: 24px;
      }

      .stat-card .label {
        font-size: 11px;
      }

      .rifa-grid {
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
        gap: 6px;
      }

      .numero-card .numero {
        font-size: 16px;
      }

      .numero-card .estado {
        font-size: 7px;
      }

      .modal-content {
        padding: 20px;
      }

      .modal-header h3 {
        font-size: 18px;
      }

      .md-button {
        padding: 10px 20px;
        font-size: 14px;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 0 10px;
      }

      .card {
        padding: 16px;
      }

      .prize-item {
        font-size: 16px;
        flex-direction: column;
        gap: 4px;
      }

      .payment-card {
        padding: 12px;
      }

      .payment-row strong {
        font-size: 11px;
      }

      .payment-row span {
        font-size: 12px;
      }

      .rifa-grid {
        grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
        gap: 5px;
      }

      .numero-card {
        border-radius: 8px;
      }

      .numero-card .numero {
        font-size: 14px;
      }

      .numero-card .estado {
        font-size: 6px;
      }

      .numero-card .nombre-mini {
        font-size: 6px;
      }

      .md-button {
        font-size: 13px;
        padding: 10px 16px;
      }
    }

    /* ========================================
       ESTILOS PARA RESERVA MASIVA
       ======================================== */
    .numero-checkbox-item {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      margin: 4px;
      border: 2px solid transparent;
      background: #f9f9f9;
    }

    .numero-checkbox-item:hover {
      background: #f0ebf8;
    }

    .numero-checkbox-item.checked {
      background: #E8DEF8;
      border-color: #6750A4;
    }

    .numero-checkbox-item input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      accent-color: #6750A4;
      margin: 0;
      flex-shrink: 0;
    }

    .numero-checkbox-label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      white-space: nowrap;
    }

    .numero-badge-small {
      background: linear-gradient(135deg, #6750A4, #4527A0);
      color: white;
      padding: 4px 10px;
      border-radius: 8px;
      font-weight: bold;
      font-size: 13px;
      min-width: 35px;
      text-align: center;
    }

    #numeros-disponibles-masivo::-webkit-scrollbar {
      width: 8px;
    }

    #numeros-disponibles-masivo::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    #numeros-disponibles-masivo::-webkit-scrollbar-thumb {
      background: #6750A4;
      border-radius: 10px;
    }

    #numeros-disponibles-masivo::-webkit-scrollbar-thumb:hover {
      background: #4527A0;
    }
  </style>
  <!-- Estilos del Listados  -->
  <style>
.data-display-section {
  margin-top: 32px;
  animation: slideUp 0.4s ease-out;
}

.data-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  border-bottom: 2px solid var(--md-sys-color-surface-variant);
  padding-bottom: 0;
}

.tab-button {
  padding: 12px 24px;
  border: none;
  background: transparent;
  color: var(--md-sys-color-outline);
  font-weight: 500;
  cursor: pointer;
  border-bottom: 3px solid transparent;
  transition: all 0.3s;
  font-size: 15px;
}

.tab-button:hover {
  background: rgba(103, 80, 164, 0.08);
  color: var(--md-sys-color-primary);
}

.tab-button.active {
  color: var(--md-sys-color-primary);
  border-bottom-color: var(--md-sys-color-primary);
}

.data-table-container {
  background: white;
  border-radius: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  overflow: hidden;
}

.data-table {
  width: 100%;
  border-collapse: collapse;
}

.data-table thead {
  background: var(--md-sys-color-primary-container);
}

.data-table th {
  padding: 16px 12px;
  text-align: left;
  font-weight: 600;
  color: var(--md-sys-color-primary);
  font-size: 14px;
  border-bottom: 2px solid var(--md-sys-color-primary);
}

.data-table td {
  padding: 14px 12px;
  border-bottom: 1px solid var(--md-sys-color-surface-variant);
  font-size: 14px;
  color: #333;
}

.data-table tbody tr {
  transition: background 0.2s;
}

.data-table tbody tr:hover {
  background: rgba(103, 80, 164, 0.04);
}

.numero-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-weight: 700;
  font-size: 16px;
  color: white;
}

.numero-badge.reservado {
  background: var(--md-sys-color-warning);
}

.numero-badge.pagado {
  background: var(--md-sys-color-primary);
}

.estado-badge {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
}

.estado-badge.reservado {
  background: #FFF3E0;
  color: #F57C00;
}

.estado-badge.pagado {
  background: #E8DEF8;
  color: #6750A4;
}

.empty-state {
  text-align: center;
  padding: 48px 20px;
  color: var(--md-sys-color-outline);
}

.empty-state-icon {
  font-size: 64px;
  opacity: 0.3;
  margin-bottom: 16px;
}

.export-buttons {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
  justify-content: flex-end;
}

.btn-export {
  padding: 8px 16px;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s;
}

.btn-export-excel {
  background: #217346;
  color: white;
}

.btn-export-excel:hover {
  background: #1a5c37;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(33, 115, 70, 0.3);
}

.btn-export-pdf {
  background: #D32F2F;
  color: white;
}

.btn-export-pdf:hover {
  background: #B71C1C;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(211, 47, 47, 0.3);
}

.search-box {
  margin-bottom: 16px;
  position: relative;
}

.search-box input {
  width: 100%;
  padding: 12px 40px 12px 16px;
  border: 2px solid var(--md-sys-color-outline);
  border-radius: 12px;
  font-size: 14px;
  transition: border 0.2s;
}

.search-box input:focus {
  outline: none;
  border-color: var(--md-sys-color-primary);
}

.search-box .material-icons {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--md-sys-color-outline);
}

.time-badge {
  font-size: 11px;
  color: var(--md-sys-color-outline);
  display: block;
  margin-top: 4px;
}

@media (max-width: 768px) {
  .data-table {
    font-size: 12px;
  }
  
  .data-table th,
  .data-table td {
    padding: 10px 8px;
  }
  
  .numero-badge {
    width: 32px;
    height: 32px;
    font-size: 14px;
  }
  
  .export-buttons {
    flex-direction: column;
  }
  
  .btn-export {
    width: 100%;
    justify-content: center;
  }
}
</style>
<!-- ===========================================
     PARTE 1: CSS MEJORADO PARA HEADER DE PREMIOS
     =========================================== -->
<style>
/* Header de premios redise√±ado */
.rifa-header-redesign {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 24px;
  padding: 32px;
  margin-bottom: 32px;
  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
  animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.prizes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

.prize-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 24px;
  text-align: center;
  transition: transform 0.3s, box-shadow 0.3s;
  position: relative;
  overflow: hidden;
}

.prize-card::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
  transition: transform 0.5s;
}

.prize-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.prize-card:hover::before {
  transform: scale(1.2);
}

.prize-icon {
  font-size: 48px;
  margin-bottom: 12px;
  display: block;
}

.prize-card h3 {
  color: #6750A4;
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 12px;
  position: relative;
}

.prize-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.prize-list li {
  padding: 8px 0;
  border-bottom: 1px solid rgba(103, 80, 164, 0.1);
  font-size: 15px;
  color: #333;
}

.prize-list li:last-child {
  border-bottom: none;
}

.prize-value {
  background: linear-gradient(135deg, #FFD700, #FFA500);
  color: #333131;
  padding: 12px 24px;
  border-radius: 50px;
  font-weight: 700;
  font-size: 20px;
  display: inline-block;
  margin-top: 12px;
  box-shadow: 0 4px 15px rgba(255, 165, 0, 0.4);
}

/* Tarjeta de pago moderna */
.payment-card-modern {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 24px;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 20px;
  align-items: center;
}

.payment-info h3 {
  color: #6750A4;
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 16px;
}
.payment-row-modern {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
  padding: 10px;
  background: rgba(103, 80, 164, 0.05);
  border-radius: 12px;
  transition: background 0.3s;
}
/* @media (max-width: 480px) {
  .prizes-grid,
  .visual-section,
  .prizes-images,
  .payment-card-modern,
  .rifa-grid,
  .stats {
    gap: 5px !important;
  }

  /* Ajustes complementarios para mantener proporciones con gap reducido */
  .prize-card,
  .mascot-card,
  .prizes-images img,
  .qr-container-modern img {
    margin: 0;
  }



.payment-row-modern:hover {
  background: rgba(103, 80, 164, 0.1);
}

.payment-row-modern i {
  color: #6750A4;
  font-size: 20px;
}

.payment-row-modern .label {
  font-weight: 600;
  color: #333;
  min-width: 60px;
}

.payment-row-modern .value {
  color: #0066CC;
  font-weight: 500;
  user-select: all;
  flex: 1;
}

.qr-container-modern {
  background: white;
  padding: 16px;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  text-align: center;
}

.qr-container-modern img {
  max-width: 200px;
  width: 100%;
  border-radius: 12px;
}

.qr-container-modern p {
  margin-top: 8px;
  font-size: 13px;
  color: #666;
  font-weight: 500;
}

/* Secci√≥n de im√°genes mejorada */
.visual-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 24px;
}

.mascot-card, .prizes-images {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 20px;
  padding: 20px;
  text-align: center;
  transition: transform 0.3s;
}

  .mascot-card {
    padding: 80px;
  }
@media (max-width: 480px) {
  .mascot-card {
    padding: 50px;
  }
}

.mascot-card:hover, .prizes-images:hover {
  transform: scale(1.02);
}

.mascot-card img {
  max-width: 270px;
  width: 100%;
  border-radius: 16px;
  margin-bottom: 12px;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
}

.mascot-caption {
  color: #6750A4;
  font-size: 20px;
  font-weight: 600;
}

.prizes-images {
  display: flex;
  gap: 12px;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
}

.prizes-images img {
  max-width: 180px;
  border-radius: 12px;
  /* box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); */
  transition: transform 0.3s;
}

.prizes-images img:hover {
  transform: scale(1.1);
}

/* Responsive */
@media (max-width: 768px) {
  .rifa-header-redesign {
    padding: 20px;
  }

  .prizes-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .payment-card-modern {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .visual-section {
    grid-template-columns: 1fr;
  }

  .prize-value {
    font-size: 18px;
    padding: 10px 20px;
  }
}
</style>
<style>
  .btn-reenviar {
  background: #2196F3;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 6px 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-reenviar:hover {
  background: #1976D2;
  transform: translateY(-2px);
}

/* estilos del modal recordatorio  */
 .demo-button {
      background: linear-gradient(135deg, #6750A4, #4527A0);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 16px 32px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .demo-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(103, 80, 164, 0.4);
    }

    /* Estilos personalizados para SweetAlert2 */
    .swal2-popup.modal-recordatorio {
      border-radius: 24px;
      padding: 0;
      overflow: hidden;
      width: 600px;
      max-width: 90%;
    }

    .swal2-popup.modal-recordatorio .swal2-image {
      margin: 0;
      border-radius: 0;
      object-fit: cover;
      width: 100%;
      height: 200px;
    }

    .swal2-popup.modal-recordatorio .swal2-title {
      color: #6750A4;
      font-size: 24px;
      font-weight: 700;
      padding: 24px 24px 16px;
      margin: 0;
    }

    .swal2-popup.modal-recordatorio .swal2-html-container {
      padding: 0 32px 24px;
      margin: 0;
      color: #333;
      font-size: 15px;
      line-height: 1.8;
    }

    .recordatorio-item {
      display: flex;
      align-items: start;
      gap: 12px;
      padding: 16px;
      background: linear-gradient(135deg, #E8DEF8, #f0ebf8);
      border-radius: 12px;
      margin-bottom: 12px;
      border-left: 4px solid #6750A4;
    }

    .recordatorio-icon {
      background: #6750A4;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      flex-shrink: 0;
    }

    .recordatorio-text {
      flex: 1;
    }

    .recordatorio-text strong {
      display: block;
      color: #6750A4;
      font-size: 16px;
      margin-bottom: 4px;
    }

    .recordatorio-text p {
      margin: 0;
      color: #555;
      font-size: 14px;
    }

    .numero-reservado {
      display: inline-block;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #333;
      padding: 8px 20px;
      border-radius: 50px;
      font-weight: 700;
      font-size: 28px;
      box-shadow: 0 4px 12px rgba(255, 165, 0, 0.3);
      margin: 16px 0;
    }

    .destacado-box {
      background: linear-gradient(135deg, #FFF3E0, #FFE0B2);
      border: 2px solid #FF9800;
      border-radius: 12px;
      padding: 16px;
      margin-top: 16px;
      text-align: center;
    }

    .destacado-box .material-icons {
      color: #F57C00;
      font-size: 32px;
      margin-bottom: 8px;
    }

    .destacado-box p {
      margin: 8px 0 0;
      color: #E65100;
      font-weight: 600;
      font-size: 15px;
    }

    .swal2-popup.modal-recordatorio .swal2-actions {
      padding: 0 32px 32px;
      margin: 0;
      gap: 12px;
    }

    .swal2-popup.modal-recordatorio .swal2-confirm {
      background: linear-gradient(135deg, #6750A4, #4527A0);
      border: none;
      border-radius: 12px;
      padding: 14px 32px;
      font-size: 16px;
      font-weight: 600;
      box-shadow: 0 4px 16px rgba(103, 80, 164, 0.3);
      margin: 0;
    }

    .swal2-popup.modal-recordatorio .swal2-confirm:hover {
      background: linear-gradient(135deg, #4527A0, #311B92);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(103, 80, 164, 0.4);
    }

    .swal2-popup.modal-recordatorio .swal2-cancel {
      background: transparent;
      border: 2px solid #6750A4;
      color: #6750A4;
      border-radius: 12px;
      padding: 14px 32px;
      font-size: 16px;
      font-weight: 600;
      margin: 0;
    }

    .swal2-popup.modal-recordatorio .swal2-cancel:hover {
      background: rgba(103, 80, 164, 0.08);
    }

    /* Animaci√≥n de entrada */
    .swal2-popup.modal-recordatorio.swal2-show {
      animation: slideInUp 0.4s ease-out;
    }

    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .swal2-popup.modal-recordatorio {
        width: 95%;
      }

      .swal2-popup.modal-recordatorio .swal2-image {
        height: 150px;
      }

      .swal2-popup.modal-recordatorio .swal2-title {
        font-size: 20px;
        padding: 20px 20px 12px;
      }

      .swal2-popup.modal-recordatorio .swal2-html-container {
        padding: 0 20px 20px;
      }

      .recordatorio-item {
        padding: 12px;
      }

      .recordatorio-icon {
        width: 36px;
        height: 36px;
        font-size: 18px;
      }

      .numero-reservado {
        font-size: 24px;
        padding: 6px 16px;
      }

      .swal2-popup.modal-recordatorio .swal2-actions {
        padding: 0 20px 20px;
        flex-direction: column;
      }

      .swal2-popup.modal-recordatorio .swal2-confirm,
      .swal2-popup.modal-recordatorio .swal2-cancel {
        width: 100%;
        margin: 0 !important;
      }
    }
</style>
<script>
  // ========================================
// PASO 7: VALIDACI√ìN DE CONFIGURACI√ìN
// ========================================
function verificarConfiguracionEmailJS() {
  if (typeof emailjs === 'undefined') {
    console.error('‚ùå EmailJS no est√° cargado');
    return false;
  }
  
  console.log('‚úÖ EmailJS est√° cargado correctamente');
  
  // Verificar que las credenciales est√©n configuradas
  const credencialesValidas = 
    'TU_PUBLIC_KEY' !== 'TU_PUBLIC_KEY' && 
    'TU_SERVICE_ID' !== 'TU_SERVICE_ID' && 
    'TU_TEMPLATE_ID' !== 'TU_TEMPLATE_ID';
  
  if (!credencialesValidas) {
    console.warn('‚ö†Ô∏è Record√° configurar las credenciales de EmailJS');
    console.warn('   1. Public Key');
    console.warn('   2. Service ID');
    console.warn('   3. Template ID');
  }
  
  return credencialesValidas;
}

// Ejecutar al cargar la p√°gina
document.addEventListener('DOMContentLoaded', function() {
  verificarConfiguracionEmailJS();
});


</script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<!-- Sistema de Cifrado -->
<script src="./encryption.js"></script>

<script>
  // ‚ö†Ô∏ètu Public Key sistema de mails
  emailjs.init('l3sgGBbIqyzK8_Sfd');
</script>
 
<script>
  
</script>
<style>
  /* ========================================
   ESTILOS PARA SISTEMA DE AUDITOR√çA Y EMAILS
   Agregar en rifa.css o en el <style> de rifa.html
   ======================================== */

/* Bot√≥n de reenv√≠o de email */
.btn-reenviar {
  background: linear-gradient(135deg, #2196F3, #1976D2);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 6px 12px;
  cursor: pointer;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 600;
}

.btn-reenviar:hover {
  background: linear-gradient(135deg, #1976D2, #1565C0);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
}

.btn-reenviar:active {
  transform: translateY(0);
}

/* Bot√≥n de historial */
.btn-historial {
  background: linear-gradient(135deg, #FF9800, #F57C00);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 6px 12px;
  cursor: pointer;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  font-weight: 600;
}

.btn-historial:hover {
  background: linear-gradient(135deg, #F57C00, #E65100);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
}

/* Badge de email enviado */
.email-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.email-badge.enviado {
  background: #E8F5E9;
  color: #2E7D32;
  border: 1px solid #81C784;
}

.email-badge.pendiente {
  background: #FFF3E0;
  color: #E65100;
  border: 1px solid #FFB74D;
}

.email-badge.error {
  background: #FFEBEE;
  color: #C62828;
  border: 1px solid #E57373;
}

/* Secci√≥n de historial en tabla */
.historial-section {
  margin-top: 30px;
  padding: 20px;
  background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
  border-radius: 16px;
}

.historial-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 2px solid #ddd;
}

.historial-title {
  font-size: 20px;
  font-weight: 700;
  color: #6750A4;
  display: flex;
  align-items: center;
  gap: 10px;
}

.historial-stats {
  display: flex;
  gap: 15px;
}

.stat-item {
  background: white;
  padding: 8px 16px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.stat-number {
  font-size: 24px;
  font-weight: 700;
  color: #6750A4;
}

.stat-label {
  font-size: 11px;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Entrada de historial individual */
.historial-entry {
  background: white;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  border-left: 4px solid #6750A4;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  transition: all 0.3s;
}

.historial-entry:hover {
  transform: translateX(5px);
  box-shadow: 0 4px 16px rgba(0,0,0,0.12);
}

.historial-entry.pago {
  border-left-color: #4CAF50;
}

.historial-entry.correccion {
  border-left-color: #FF9800;
}

.historial-entry.eliminacion {
  border-left-color: #F44336;
}

.historial-entry.reseteo {
  border-left-color: #9E9E9E;
}

.historial-accion {
  font-size: 15px;
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.historial-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
  font-size: 12px;
  color: #666;
}

.historial-meta-item {
  display: flex;
  align-items: center;
  gap: 5px;
}

.historial-meta-item .material-icons {
  font-size: 16px;
  color: #999;
}

/* Indicador de admin actual */
.admin-indicator {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  background: linear-gradient(135deg, #E8DEF8, #D1C4E9);
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  color: #6750A4;
}

.admin-indicator .material-icons {
  font-size: 16px;
}

/* Loading spinner para env√≠o de email */
.email-spinner {
  display: inline-block;
  width: 20px;
  height: 20px;
  border: 3px solid rgba(103, 80, 164, 0.2);
  border-top-color: #6750A4;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Modal de historial mejorado */
.swal2-popup .historial-timeline {
  position: relative;
  padding-left: 30px;
}

.swal2-popup .historial-timeline::before {
  content: '';
  position: absolute;
  left: 10px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(to bottom, #6750A4, transparent);
}

.swal2-popup .historial-timeline-item {
  position: relative;
  margin-bottom: 20px;
}

.swal2-popup .historial-timeline-item::before {
  content: '';
  position: absolute;
  left: -24px;
  top: 5px;
  width: 10px;
  height: 10px;
  background: white;
  border: 3px solid #6750A4;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Tabla de emails mejorada */
.email-table-container {
  margin-top: 20px;
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}

.email-table {
  width: 100%;
  border-collapse: collapse;
}

.email-table thead {
  background: linear-gradient(135deg, #6750A4, #4527A0);
  color: white;
}

.email-table th {
  padding: 16px 12px;
  text-align: left;
  font-weight: 600;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.email-table td {
  padding: 14px 12px;
  border-bottom: 1px solid #f0f0f0;
  font-size: 14px;
}

.email-table tbody tr {
  transition: background 0.2s;
}

.email-table tbody tr:hover {
  background: rgba(103, 80, 164, 0.04);
}

.email-status-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 18px;
}

.email-status-icon.success {
  background: #E8F5E9;
  color: #4CAF50;
}

.email-status-icon.error {
  background: #FFEBEE;
  color: #F44336;
}

.email-status-icon.pending {
  background: #FFF3E0;
  color: #FF9800;
}

/* Resumen de auditor√≠a */
.audit-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin: 20px 0;
}

.audit-summary-card {
  background: white;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  text-align: center;
  transition: all 0.3s;
}

.audit-summary-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}

.audit-summary-icon {
  width: 60px;
  height: 60px;
  margin: 0 auto 15px;
  background: linear-gradient(135deg, #E8DEF8, #D1C4E9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
}

.audit-summary-value {
  font-size: 32px;
  font-weight: 700;
  color: #6750A4;
  margin-bottom: 5px;
}

.audit-summary-label {
  font-size: 13px;
  color: #666;
  text-transform: uppercase;
  letter-spacing: 1px;
}

/* Responsive */
@media (max-width: 768px) {
  .historial-stats {
    flex-direction: column;
    gap: 10px;
  }
  
  .email-table {
    font-size: 12px;
  }
  
  .email-table th,
  .email-table td {
    padding: 10px 8px;
  }
  
  .btn-reenviar,
  .btn-historial {
    padding: 4px 8px;
    font-size: 11px;
  }
  
  .audit-summary {
    grid-template-columns: 1fr;
  }
  
  .historial-meta {
    flex-direction: column;
    gap: 8px;
  }
}

/* Animaci√≥n de entrada para elementos nuevos */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.historial-entry,
.email-badge,
.admin-indicator {
  animation: fadeInUp 0.4s ease-out;
}

/* Tooltip personalizado */
.tooltip-custom {
  position: relative;
  display: inline-block;
}

.tooltip-custom:hover::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.9);
  color: white;
  font-size: 12px;
  border-radius: 6px;
  white-space: nowrap;
  z-index: 1000;
  margin-bottom: 5px;
}

.tooltip-custom:hover::before {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 5px solid transparent;
  border-top-color: rgba(0, 0, 0, 0.9);
  margin-bottom: -5px;
}

/* Estados visuales para diferentes acciones */
.action-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
}

.action-badge.pago {
  background: #E8F5E9;
  color: #2E7D32;
}

.action-badge.correccion {
  background: #FFF3E0;
  color: #E65100;
}

.action-badge.eliminacion {
  background: #FFEBEE;
  color: #C62828;
}

.action-badge.modificacion {
  background: #E3F2FD;
  color: #1565C0;
}
</style>
</head>
<script>
  // ========================================
// PASO 2: FUNCI√ìN PARA ENVIAR EMAILS
// Agregar ANTES del submit del admin-form
// ========================================

  // ========================================
  // PASO 2: FUNCI√ìN PARA ENVIAR EMAILS
  // Agregar ANTES del submit del admin-form
  // ========================================

  async function enviarEmailCertificado(numeroData) {
    try {
      console.log('üìß Preparando email para:', numeroData.email);
      
      const templateParams = {
        to_email: numeroData.email,
        to_name: numeroData.nombre,
        numero: numeroData.numero.toString().padStart(3, '0'),
        dni: numeroData.dni,
        nro_op: numeroData.nro_op,
        link_ticket: `https://sanluisgonzaga.ar/ticket.html?id=${numeroData.id}`,
        fecha_sorteo: '22 de Diciembre 2026'
      };

      const response = await emailjs.send(
        'service_7lbeylp',      // ‚ö†Ô∏è Tu Service ID
        'template_egop7d7',     // ‚ö†Ô∏è Tu Template ID
        templateParams
      );

      console.log('‚úÖ Email enviado exitosamente:', response);
      return true;
      
    } catch (error) {
      console.error('‚ùå Error enviando email:', error);
      return false;
    }
  }
</script>

<script>
// ========================================
// PASO 3: SUBMIT MEJORADO DEL FORMULARIO ADMIN
// REEMPLAZAR el existente en rifa.html
// ========================================
document.getElementById('admin-form').onsubmit = async function(e) {
  e.preventDefault();
  
  const nombre = document.getElementById('admin-nombre-input').value.trim();
  const email = document.getElementById('admin-email-input').value.trim();
  const state = parseInt(document.getElementById('admin-estado-select').value);
  const nro_op = document.getElementById('admin-nro_op-input').value.trim();
  const dni = document.getElementById('admin-dni-input').value.trim();

  try {
    // Obtener datos actuales
    const docSnapshot = await db.collection('rifa').doc(currentEditingId).get();
    const dataActual = docSnapshot.data();
    
    const adminActual = currentUser ? (currentUser.displayName || currentUser.email) : 'Desconocido';
    
    const updateData = {
      nombre: nombre,
      email: email,
      state: state,
      dni: dni,
      nro_op: nro_op || null,
      ultima_modificacion: firebase.firestore.FieldValue.serverTimestamp(),
      ultimo_admin: adminActual
    };
    
    // ========================================
    // L√ìGICA DE AUDITOR√çA
    // ========================================
    let esPrimerRegistroPago = false;
    
    if (nro_op && !dataActual.nro_op) {
      // PRIMER REGISTRO DE PAGO
      updateData.admin_registro_pago = adminActual;
      updateData.fecha_pago = firebase.firestore.FieldValue.serverTimestamp();
      updateData.state = 3;
      esPrimerRegistroPago = true;
      console.log('‚úÖ Primer registro de pago por:', adminActual);
    }
    else if (nro_op && dataActual.nro_op && nro_op !== dataActual.nro_op) {
      // CORRECCI√ìN DE NRO OPERACI√ìN
      updateData.admin_correccion = adminActual;
      updateData.fecha_correccion = firebase.firestore.FieldValue.serverTimestamp();
      updateData.nro_op_anterior = dataActual.nro_op;
      updateData.state = 3;
      console.log('üîß Correcci√≥n de nro operaci√≥n por:', adminActual);
    }
    else if (!nro_op && dataActual.nro_op) {
      // ELIMINACI√ìN DE PAGO
      updateData.admin_elimino_pago = adminActual;
      updateData.fecha_eliminacion = firebase.firestore.FieldValue.serverTimestamp();
      updateData.nro_op_eliminado = dataActual.nro_op;
      updateData.nro_op = null;
      console.log('üóëÔ∏è Eliminaci√≥n de pago por:', adminActual);
    }
    
    if (state === 1) {
      // RESETEO COMPLETO
      updateData.nombre = '';
      updateData.email = '';
      updateData.dni = null;
      updateData.nro_op = null;
      updateData.time = null;
      updateData.admin_reseteo = adminActual;
      updateData.fecha_reseteo = firebase.firestore.FieldValue.serverTimestamp();
      console.log('üîÑ Reseteo del n√∫mero por:', adminActual);
    }
    
    // ========================================
    // HISTORIAL DE CAMBIOS
    // ========================================
    const entradaHistorial = {
      admin: adminActual,
      fecha: new Date().toISOString(),
      accion: getAccionRealizada(dataActual, updateData),
      estado_anterior: dataActual.state,
      estado_nuevo: state,
      nro_op_anterior: dataActual.nro_op || null,
      nro_op_nuevo: nro_op || null
    };
    
    updateData.historial = firebase.firestore.FieldValue.arrayUnion(entradaHistorial);
    
    // Guardar en Firestore
    await db.collection('rifa').doc(currentEditingId).update(updateData);
    
    console.log('‚úÖ Cambios guardados con auditor√≠a:', updateData);
    
    // ========================================
    // ENVIAR EMAIL SI ES PRIMER REGISTRO DE PAGO
    // ========================================
    let emailEnviado = false;
    if (esPrimerRegistroPago && email) {
      console.log('üìß Intentando enviar email de confirmaci√≥n...');
      
      const numeroData = {
        id: currentEditingId,
        numero: dataActual.numero,
        nombre: nombre,
        email: email,
        dni: dni,
        nro_op: nro_op
      };
      
      emailEnviado = await enviarEmailCertificado(numeroData);
      
      if (emailEnviado) {
        await db.collection('rifa').doc(currentEditingId).update({
          email_enviado: true,
          email_enviado_fecha: firebase.firestore.FieldValue.serverTimestamp()
        });
      }
    }
    
    closeAdminModal();
    
    if (typeof renderDataTable === 'function') {
      renderDataTable();
    }
    
    // Mensaje de √©xito
    let mensajeExito = `
      <p style="margin: 12px 0;"><strong>Acci√≥n:</strong> ${entradaHistorial.accion}</p>
      <p style="font-size: 13px; color: #666;">Registrado por: ${adminActual}</p>
    `;
    
    if (esPrimerRegistroPago && email) {
      if (emailEnviado) {
        mensajeExito += `
          <p style="margin-top: 12px; padding: 10px; background: #E8F5E9; border-radius: 8px; color: #2E7D32;">
            üìß Email de confirmaci√≥n enviado a:<br><strong>${email}</strong>
          </p>
        `;
      } else {
        mensajeExito += `
          <p style="margin-top: 12px; padding: 10px; background: #FFF3E0; border-radius: 8px; color: #E65100;">
            ‚ö†Ô∏è No se pudo enviar el email.<br>Puedes reenviarlo manualmente.
          </p>
        `;
      }
    }
    
    Swal.fire({
      icon: 'success',
      title: 'Cambios Guardados',
      html: mensajeExito,
      confirmButtonText: 'Perfecto',
      timer: emailEnviado ? 5000 : 3000
    });
    
  } catch (error) {
    console.error('‚ùå Error:', error);
    Swal.fire({
      icon: 'error',
      title: 'Error al Guardar',
      text: 'Error al guardar: ' + error.message,
      confirmButtonText: 'Reintentar'
    });
  }
};

// ========================================
// FUNCI√ìN AUXILIAR: Determinar acci√≥n realizada
// ========================================
function getAccionRealizada(dataAnterior, dataNueva) {
  if (dataNueva.nro_op && !dataAnterior.nro_op) {
    return 'üí∞ Registr√≥ pago (Nro Op: ' + dataNueva.nro_op + ')';
  }
  
  if (dataNueva.nro_op && dataAnterior.nro_op && dataNueva.nro_op !== dataAnterior.nro_op) {
    return 'üîß Corrigi√≥ nro operaci√≥n (' + dataAnterior.nro_op + ' ‚Üí ' + dataNueva.nro_op + ')';
  }
  
  if (!dataNueva.nro_op && dataAnterior.nro_op) {
    return 'üóëÔ∏è Elimin√≥ pago (Nro Op: ' + dataAnterior.nro_op + ')';
  }
  
  if (dataAnterior.state !== dataNueva.state) {
    const estados = { 1: 'Disponible', 2: 'Reservado', 3: 'Pagado' };
    return 'üìù Cambi√≥ estado: ' + estados[dataAnterior.state] + ' ‚Üí ' + estados[dataNueva.state];
  }
  
  if (dataNueva.nombre !== dataAnterior.nombre || dataNueva.email !== dataAnterior.email || dataNueva.dni !== dataAnterior.dni) {
    return '‚úèÔ∏è Modific√≥ datos del participante';
  }
  
  return 'üìã Edit√≥ informaci√≥n';
}

// ========================================
// VER HISTORIAL COMPLETO EN MODAL
// ========================================
async function verHistorialNumero(numeroId) {
  try {
    const doc = await db.collection('rifa').doc(numeroId).get();
    const data = doc.data();
    
    if (!data.historial || data.historial.length === 0) {
      Swal.fire({
        icon: 'info',
        title: 'Sin Historial',
        text: 'Este n√∫mero no tiene historial de cambios registrados.',
        confirmButtonText: 'OK',
        confirmButtonColor: '#6750A4'
      });
      return;
    }
    
    let historialHTML = '<div style="text-align: left; max-height: 450px; overflow-y: auto; padding-right: 8px;">';
    
    const historialOrdenado = [...data.historial].sort((a, b) => {
      return new Date(b.fecha) - new Date(a.fecha);
    });
    
    historialOrdenado.forEach((entrada, index) => {
      const fecha = new Date(entrada.fecha).toLocaleString('es-AR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
      
      let borderColor = '#6750A4';
      if (entrada.accion.includes('Registr√≥ pago')) borderColor = '#4CAF50';
      if (entrada.accion.includes('Elimin√≥')) borderColor = '#F44336';
      if (entrada.accion.includes('Corrigi√≥')) borderColor = '#FF9800';
      
      historialHTML += `
        <div style="
          padding: 14px;
          border-left: 4px solid ${borderColor};
          margin-bottom: 12px;
          background: ${index % 2 === 0 ? '#f9f9f9' : '#ffffff'};
          border-radius: 8px;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        ">
          <div style="font-weight: 600; color: ${borderColor}; margin-bottom: 6px;">
            ${entrada.accion}
          </div>
          <div style="font-size: 12px; color: #666; display: flex; flex-direction: column; gap: 4px;">
            <span><strong>üë§ Admin:</strong> ${entrada.admin}</span>
            <span><strong>üìÖ Fecha:</strong> ${fecha}</span>
            ${entrada.nro_op_anterior ? `<span><strong>üî¢ Nro Op anterior:</strong> ${entrada.nro_op_anterior}</span>` : ''}
            ${entrada.nro_op_nuevo ? `<span><strong>üî¢ Nro Op nuevo:</strong> ${entrada.nro_op_nuevo}</span>` : ''}
          </div>
        </div>
      `;
    });
    
    historialHTML += '</div>';
    
    const totalCambios = data.historial.length;
    const adminsUnicos = [...new Set(data.historial.map(h => h.admin))];
    
    historialHTML += `
      <div style="
        margin-top: 16px;
        padding: 12px;
        background: #E8DEF8;
        border-radius: 8px;
        font-size: 13px;
        text-align: center;
      ">
        <strong>üìä Resumen:</strong> ${totalCambios} cambio${totalCambios > 1 ? 's' : ''} realizado${totalCambios > 1 ? 's' : ''} por ${adminsUnicos.length} administrador${adminsUnicos.length > 1 ? 'es' : ''}
      </div>
    `;
    
    Swal.fire({
      title: `üìã Historial del N√∫mero ${data.numero}`,
      html: historialHTML,
      width: '650px',
      confirmButtonText: 'Cerrar',
      confirmButtonColor: '#6750A4'
    });
    
  } catch (error) {
    console.error('Error al cargar historial:', error);
    Swal.fire({
      icon: 'error',
      title: 'Error',
      text: 'No se pudo cargar el historial: ' + error.message,
      confirmButtonText: 'OK',
      confirmButtonColor: '#B3261E'
    });
  }
}
</script>
<script>
  // ========================================
// PASO 5: FUNCI√ìN PARA REENVIAR EMAIL MANUALMENTE
// ========================================
async function reenviarEmail(numeroId) {
  try {
    const doc = await db.collection('rifa').doc(numeroId).get();
    const data = doc.data();
    
    if (!data || data.state !== 3) {
      Swal.fire({
        icon: 'warning',
        title: 'No se puede enviar',
        text: 'Este n√∫mero no est√° marcado como pagado.',
        confirmButtonText: 'OK'
      });
      return;
    }
    
    if (!data.email) {
      Swal.fire({
        icon: 'warning',
        title: 'Sin Email',
        text: 'Este participante no tiene email registrado.',
        confirmButtonText: 'OK'
      });
      return;
    }
    
    Swal.fire({
      title: 'üìß Reenviar Email',
      html: `
        <p>¬øReenviar email de confirmaci√≥n a:</p>
        <p style="font-weight: bold; color: #6750A4;">${data.email}</p>
      `,
      showCancelButton: true,
      confirmButtonText: 'S√≠, Reenviar',
      cancelButtonText: 'Cancelar',
      confirmButtonColor: '#6750A4'
    }).then(async (result) => {
      if (result.isConfirmed) {
        Swal.fire({
          title: 'Enviando...',
          html: '<div class="spinner"></div>',
          allowOutsideClick: false,
          showConfirmButton: false,
          didOpen: () => {
            Swal.showLoading();
          }
        });
        
        const numeroData = {
          id: numeroId,
          numero: data.numero,
          nombre: data.nombre,
          email: data.email,
          dni: data.dni,
          nro_op: data.nro_op
        };
        
        const enviado = await enviarEmailCertificado(numeroData);
        
        if (enviado) {
          await db.collection('rifa').doc(numeroId).update({
            email_reenviado: true,
            email_reenviado_fecha: firebase.firestore.FieldValue.serverTimestamp(),
            email_reenviado_por: currentUser ? (currentUser.displayName || currentUser.email) : 'Desconocido'
          });
          
          Swal.fire({
            icon: 'success',
            title: '‚úÖ Email Reenviado',
            text: 'El email se envi√≥ correctamente.',
            confirmButtonText: 'Perfecto'
          });
        } else {
          Swal.fire({
            icon: 'error',
            title: '‚ùå Error',
            text: 'No se pudo enviar el email. Verific√° la configuraci√≥n de EmailJS.',
            confirmButtonText: 'Entendido'
          });
        }
      }
    });
    
  } catch (error) {
    console.error('Error al reenviar email:', error);
    Swal.fire({
      icon: 'error',
      title: 'Error',
      text: 'Error al reenviar: ' + error.message,
      confirmButtonText: 'OK'
    });
  }
}
</script>
<body>


<section class="rifa-section">
  <div class="container">
    <!-- Vista P√∫blica -->
    <div id="public-view" class="card">
      
      <!-- ===========================================
     PARTE 2: HTML MEJORADO PARA HEADER
     =========================================== -->
<!-- Reemplazar el div con class="rifa-header" por esto: -->
<!-- Header con datos cifrados (se carga din√°micamente) -->
 <style>
  /* Info-Box Redise√±ado - Estilo Moderno con Glassmorphism */
  .info-box-modern {
    background: linear-gradient(135deg, rgba(103, 80, 164, 0.95), rgba(69, 39, 160, 0.9));
    backdrop-filter: blur(10px);
    border-radius: 24px;
    padding: 32px;
    margin-bottom: 24px;
    box-shadow: 0 8px 32px rgba(103, 80, 164, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.18);
    position: relative;
    overflow: hidden;
  }

  .info-box-modern::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    animation: pulse 8s ease-in-out infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1) rotate(0deg); }
    50% { transform: scale(1.1) rotate(180deg); }
  }

  .instruction-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    position: relative;
    z-index: 1;
  }

  .instruction-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  }

  .instruction-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
  }

  .icon-wrapper {
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, #6750A4, #4527A0);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 16px rgba(103, 80, 164, 0.3);
    flex-shrink: 0;
  }

  .icon-wrapper .material-icons {
    color: white;
    font-size: 32px;
  }

  .instruction-title {
    color: #6750A4;
    font-size: 20px;
    font-weight: 700;
    margin: 0;
  }

  .instruction-content {
    color: #333;
    line-height: 1.8;
    font-size: 15px;
  }

  .status-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 16px;
  }

  .status-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border-radius: 50px;
    font-size: 13px;
    font-weight: 600;
    transition: all 0.3s;
  }

  .status-badge:hover {
    transform: scale(1.05);
  }

  .badge-disponible {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
  }

  .badge-reservado {
    background: linear-gradient(135deg, #FF9800, #F57C00);
    color: white;
    box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
  }

  .badge-pagado {
    background: linear-gradient(135deg, #6750A4, #4527A0);
    color: white;
    box-shadow: 0 4px 12px rgba(103, 80, 164, 0.3);
  }

  .status-badge .material-icons {
    font-size: 18px;
  }

  .divider {
    height: 2px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    margin: 24px 0;
  }

  .email-card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 24px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 1;
  }

  .email-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
  }

  .email-title {
    color: #6750A4;
    font-size: 20px;
    font-weight: 700;
    margin: 0;
  }

  .email-content {
    color: #333;
    line-height: 1.8;
    font-size: 15px;
    margin-bottom: 16px;
  }

  .email-button {
    display: inline-flex;
    align-items: center;
    gap: 12px;
    padding: 14px 28px;
    background: linear-gradient(135deg, #6750A4, #4527A0);
    color: white;
    text-decoration: none;
    border-radius: 50px;
    font-weight: 600;
    font-size: 15px;
    transition: all 0.3s;
    box-shadow: 0 4px 16px rgba(103, 80, 164, 0.3);
  }

  .email-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(103, 80, 164, 0.4);
    background: linear-gradient(135deg, #4527A0, #311B92);
    color: white;
  }

  .confirmation-alert {
    background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
    border-left: 4px solid #4CAF50;
    border-radius: 12px;
    padding: 16px 20px;
    margin-top: 20px;
    display: flex;
    align-items: start;
    gap: 12px;
  }

  .confirmation-alert .material-icons {
    color: #2E7D32;
    font-size: 24px;
  }

  .confirmation-alert p {
    margin: 0;
    color: #2E7D32;
    font-weight: 600;
    line-height: 1.6;
  }

  .form-link {
    color: #6750A4;
    font-weight: 700;
    text-decoration: none;
    border-bottom: 2px solid #6750A4;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 4px;
  }

  .form-link:hover {
    color: #4527A0;
    border-bottom-color: #4527A0;
    transform: translateY(-1px);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .info-box-modern {
      padding: 24px 20px;
      border-radius: 20px;
    }

    .instruction-card,
    .email-card {
      padding: 20px;
    }

    .instruction-header,
    .email-header {
      flex-direction: column;
      text-align: center;
    }

    .icon-wrapper {
      width: 48px;
      height: 48px;
    }

    .icon-wrapper .material-icons {
      font-size: 28px;
    }

    .instruction-title,
    .email-title {
      font-size: 18px;
    }

    .status-badges {
      justify-content: center;
    }

    .email-button {
      width: 100%;
      justify-content: center;
      padding: 12px 24px;
    }
  }

  @media (max-width: 480px) {
    .info-box-modern {
      padding: 20px 16px;
    }

    .instruction-card,
    .email-card {
      padding: 16px;
    }

    .status-badge {
      padding: 6px 12px;
      font-size: 12px;
    }
  }
</style>
<div class="rifa-header-redesign" id="header-rifa-container">
  <div style="text-align:center;padding:40px;display:flex;flex-direction:column;align-items:center;gap:12px;">
    <div id="rifa-spinner" class="spinner" aria-hidden="true"></div>
     <img src="./rifa/seguridad.png" alt="Cargando datos seguros" id="rifa-seguridad-img" />
    <p style="color:white;margin:0;font-size:0.95rem;">Cargando informaci√≥n segura...</p>
  </div>

  <style>
    /* Imagen ajustada y sin contorno (sin padding, sin fondo, sin sombra) */
    #rifa-seguridad-img{
      width:140px;
      max-width:36%;
      height:auto;
      object-fit:contain;
      border-radius:10px;
      border: none;
      background: transparent;
      padding: 0;
      box-shadow: none;
      -webkit-box-shadow: none;
      -moz-box-shadow: none;
    }

    /* Spinner visible debajo de la imagen */
    #rifa-spinner{
      width:48px;
      height:48px;
      border:4px solid rgba(255,255,255,0.25);
      border-top-color:#ffffff;
      border-radius:50%;
      animation:rifa-spin 1s linear infinite;
      box-shadow:0 4px 12px rgba(0,0,0,0.12);
      margin-top:6px;
    }

    @keyframes rifa-spin{
      to{ transform:rotate(360deg); }
    }

    /* Responsivo: reducir imagen y spinner en pantallas peque√±as */
    @media (max-width:480px){
      #rifa-seguridad-img{ width:110px; max-width:48%; }
      #rifa-spinner{ width:38px; height:38px; border-width:3px; }
    }
    
  </style>
  
</div>

      <div class="mode-toggle">
        <button class="md-button btn-secondary" onclick="showAdminLogin()">
          <span class="material-icons">admin_panel_settings</span>
          Acceso Admin
        </button>
      </div>

  <div class="info-box-modern">
    
    <!-- Card de C√≥mo Funciona -->
    <div class="instruction-card">
      <div class="instruction-header">
        <div class="icon-wrapper">
          <span class="material-icons">info</span>
        </div>
        <div>
          <h4 class="instruction-title">üìå C√≥mo funciona</h4>
        </div>
      </div>
      
      <div class="instruction-content">
        <p>
          Haz clic en un n√∫mero para reservarlo. Los n√∫meros tienen diferentes estados:
        </p>
      </div>

      <div class="status-badges">
        <span class="status-badge badge-disponible">
          <span class="material-icons">check_circle</span>
          <span>Disponible</span>
        </span>
        <span class="status-badge badge-reservado">
          <span class="material-icons">schedule</span>
          <span>Reservado</span>
        </span>
        <span class="status-badge badge-pagado">
          <span class="material-icons">verified</span>
          <span>Pagado</span>
        </span>
      </div>
    </div>

    <!-- Divider -->
    <div class="divider"></div>

    <!-- Card de Email -->
    <div class="email-card">
      <div class="email-header">
        <div class="icon-wrapper">
          <span class="material-icons">email</span>
        </div>
        <div>
          <h4 class="email-title">üìß Importante</h4>
        </div>
      </div>
      
      <div class="email-content">
        <p>
          Despu√©s de realizar el pago, te agradecemos que nos avises enviando un mensaje desde el 
          <a href="#formulario-contacto" class="form-link">
            <span>formulario de contacto</span>
            <span class="material-icons">arrow_forward</span>
          </a> 
          m√°s abajo, incluyendo tu n√∫mero reservado.
        </p>
        
        <p style="margin-top: 12px;">
          O env√≠anos un correo directamente üëá
        </p>
      </div>

      <a href="mailto:sanluisvillaelisa@gmail.com" class="email-button">
        <span class="material-icons">email</span>
        <span>sanluisvillaelisa@gmail.com</span>
      </a>

      <div class="confirmation-alert">
        <span class="material-icons">schedule</span>
        <p>
          Los administradores confirmar√°n tu pago en breve
        </p>
      </div>
    </div>

  </div>

      <div class="stats">
        <div class="stat-card">
          <div class="number" id="public-stat-disponibles">0</div>
          <div class="label">Disponibles</div>
        </div>
        <div class="stat-card">
          <div class="number" id="public-stat-reservados">0</div>
          <div class="label">Reservados</div>
        </div>
        <div class="stat-card">
          <div class="number" id="public-stat-pagados">0</div>
          <div class="label">Pagados</div>
        </div>
      </div>

      <!-- Bot√≥n de Reserva Masiva -->
      <div style="margin: 20px 0; text-align: center;" id="accion">
        <img src="./rifa/masiva.gif" alt="Reserva Masiva" style=" height: 80px; vertical-align: middle; margin-right: 8px;">
        <button class="md-button btn-primary" onclick="abrirModalReservaMasiva()" style="width: 100%; max-width: 400px; font-size: 16px; padding: 14px 24px;">
          <span class="material-icons">playlist_add_check</span>
          üéØ Reserva Masiva de N√∫meros
        </button>
        <p style="margin-top: 8px; font-size: 13px; color: #666;">
            Reserva varios n√∫meros a la vez con un solo formulario √≥ elige de a uno sobre la grilla üëá
        </p>
      </div>

      <div id="public-loading" class="loading">
        <div class="spinner-gif" style="width:80px; height:80px; margin: 0 auto 16px;">
          <img src="./rifa/run.gif" alt="Cargando n√∫meros..." style="max-width:100%; width:100%; height:auto; display:block;">
        </div>
        <p>Cargando n√∫meros disponibles...</p>
      </div>

      <div id="public-rifa-grid" class="rifa-grid" style="display:none;"></div>
    </div>

    <!-- Login Admin -->
    <div id="admin-login" class="card" style="display:none;">
      <div style="text-align: center; margin-bottom: 24px;">
        <h1 style="color: var(--md-sys-color-primary); font-size: 28px; margin-bottom: 8px;">üîê Admin Rifa</h1>
        <p class="subtitle">Acceso exclusivo para administradores</p>
      </div>

      <button class="md-button btn-secondary" onclick="showPublicView()" style="margin-bottom: 24px; width: 100%;">
        <span class="material-icons">arrow_back</span>
        Volver a vista p√∫blica
      </button>

      <div class="login-buttons">
        <button id="login-google" class="md-button btn-google">
          <svg width="20" height="20" viewBox="0 0 20 20">
            <path fill="#4285F4" d="M19.6 10.23c0-.82-.1-1.42-.25-2.05H10v3.72h5.5c-.15.96-.74 2.31-2.04 3.22v2.45h3.16c1.89-1.73 2.98-4.3 2.98-7.34z"/>
            <path fill="#34A853" d="M13.46 15.13c-.83.59-1.96 1-3.46 1-2.64 0-4.88-1.74-5.68-4.15H1.07v2.52C2.72 17.75 6.09 20 10 20c2.7 0 4.96-.89 6.62-2.42l-3.16-2.45z"/>
            <path fill="#FBBC05" d="M3.99 10c0-.69.12-1.35.32-1.97V5.51H1.07A9.973 9.973 0 000 10c0 1.61.39 3.14 1.07 4.49l3.24-2.52c-.2-.62-.32-1.28-.32-1.97z"/>
            <path fill="#EA4335" d="M10 3.88c1.88 0 3.13.81 3.85 1.48l2.84-2.76C14.96.99 12.7 0 10 0 6.09 0 2.72 2.25 1.07 5.51l3.24 2.52C5.12 5.62 7.36 3.88 10 3.88z"/>
          </svg>
          Ingresar con Google
        </button>
      </div>
    </div>

    <!-- Vista Admin -->
    <div id="admin-view" class="card" style="display:none;">
      <div class="admin-header">
        <div class="user-info">
          <img id="user-avatar" class="user-avatar" src="" alt="Avatar">
          <div>
            <h3 id="user-name" style="margin:0; font-size: 16px;"></h3>
            <span class="admin-badge">Administrador</span>
          </div>
        </div>
        <button id="logout-btn" class="md-button btn-logout">
          <span class="material-icons">logout</span>
          Salir
        </button>
      </div>
      <button id="btn-actualizar-datos-pago" class="md-button btn-secondary" style="display: none;">
        <span class="material-icons">vpn_key</span>
        <span class="d-none d-md-inline">Actualizar Datos Pago</span>
      </button>
      <div style="text-align: center; margin-bottom: 24px;">
        <h2 style="color: var(--md-sys-color-primary); font-size: 24px;">Panel de Administraci√≥n</h2>
      </div>

      <div class="stats">
        <div class="stat-card">
          <div class="number" id="admin-stat-disponibles">0</div>
          <div class="label">Disponibles</div>
        </div>
        <div class="stat-card">
          <div class="number" id="admin-stat-reservados">0</div>
          <div class="label">Reservados</div>
        </div>
        <div class="stat-card">
          <div class="number" id="admin-stat-pagados">0</div>
          <div class="label">Pagados</div>
        </div>
      </div>
<!-- ========================================
     AGREGAR DESPU√âS DE LAS STATS EN ADMIN VIEW
     En rifa.html, l√≠nea despu√©s de </div> de stats
     ========================================-->

<!-- Buscador R√°pido Admin -->
<div id="busqueda-rapida-admin" class="search-panel" style="display: none;">
  <div class="search-header" style="display:flex; gap:16px; align-items:stretch;">

    <div class="search-text" style="display:flex; flex-direction:column; justify-content:center; flex:1;">
      <div class="search-icon-title" style="display:flex; align-items:center; gap:12px; margin-bottom:6px;">
        <i class="material-icons" style="font-size:32px; color:white;">search</i>
        <h3 style="color:white; margin:0; font-size:22px;">B√∫squeda R√°pida de Participantes</h3>
      </div>
      <p class="search-subtitle" style="color:rgba(255,255,255,0.9); margin:0; font-size:14px;">
        üí° Busca por nombre, DNI, email para confirmar pagos
      </p>
    </div>
  </div>
  </div>

  <div class="search-input-container">
    <img src="./rifa/search.gif" alt="Buscar" class="search-img" style="height:100%; max-height:60px; width:auto; border-radius:8px; object-fit:contain; ">

    <div class="search-input-wrapper">

      <i class="material-icons search-input-icon">person_search</i>
      <input 
        type="text" 
        id="busqueda-grilla-input" 
        class="search-input-field"
        placeholder="Ej: Juan P√©rez, 12345678, user@mail.com..."
        autocomplete="off"
      >
      <button 
        id="btn-limpiar-busqueda" 
        class="btn-clear-search" 
        title="Limpiar b√∫squeda"
        style="display: none;">
        <i class="material-icons">close</i>
      </button>
    </div>
    
    <button id="btn-buscar-grilla" class="btn-search-action">
      <i class="material-icons">search</i>
      <span>Buscar</span>
    </button>
  </div>

  <div id="busqueda-grilla-info" class="search-results-info" style="display: none;">
    <i class="material-icons">filter_list</i>
    <span>
      <strong><span id="resultados-count">0</span> resultado(s)</strong> 
      encontrados. Haz clic en el n√∫mero para editar.
    </span>
  </div>
</div>

<!-- CSS para el Buscador -->
<style>
/* Panel de b√∫squeda */
.search-panel {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20px;
  padding: 24px;
  margin-bottom: 24px;
  box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
  animation: slideDown 0.4s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.search-header {
  margin-bottom: 20px;
  text-align: center;
}

.search-icon-title {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 8px;
}

.search-icon-title .material-icons {
  font-size: 32px;
  color: white;
}

.search-icon-title h3 {
  color: white;
  font-size: 22px;
  font-weight: 700;
  margin: 0;
}

.search-subtitle {
  color: rgba(255, 255, 255, 0.9);
  font-size: 14px;
  margin: 0;
}

.search-input-container {
  display: flex;
  gap: 12px;
  margin-bottom: 16px;
}

.search-input-wrapper {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  background: white;
  border-radius: 16px;
  padding: 0 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.search-input-icon {
  color: #6750A4;
  font-size: 24px;
  margin-right: 12px;
}

.search-input-field {
  flex: 1;
  border: none;
  outline: none;
  padding: 16px 8px;
  font-size: 16px;
  background: transparent;
}

.search-input-field::placeholder {
  color: #999;
}

.btn-clear-search {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 4px;
  border-radius: 50%;
  transition: all 0.2s;
  color: #999;
}

.btn-clear-search:hover {
  background: #f5f5f5;
  color: #333;
}

.btn-search-action {
  background: linear-gradient(135deg, #4CAF50, #45a049);
  color: white;
  border: none;
  border-radius: 16px;
  padding: 16px 32px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  transition: all 0.3s;
  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
}

.btn-search-action:hover {
  background: linear-gradient(135deg, #45a049, #3d8b40);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(76, 175, 80, 0.5);
}

.btn-search-action .material-icons {
  font-size: 20px;
}

.search-results-info {
  background: linear-gradient(135deg, #E8F5E9, #C8E6C9);
  border: 2px solid #4CAF50;
  border-radius: 12px;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.search-results-info .material-icons {
  color: #4CAF50;
  font-size: 24px;
}

.search-results-info span {
  color: #2E7D32;
  font-size: 14px;
}

/* Highlight para n√∫meros encontrados */
.numero-card.search-highlight {
  animation: pulse 1.5s ease-in-out infinite;
  box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.5);
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.5);
  }
  50% {
    box-shadow: 0 0 0 6px rgba(255, 193, 7, 0.3);
  }
}

/* Responsive */
@media (max-width: 768px) {
  .search-panel {
    padding: 16px;
  }

  .search-icon-title h3 {
    font-size: 18px;
  }

  .search-icon-title .material-icons {
    font-size: 24px;
  }

  .search-subtitle {
    font-size: 12px;
  }

  .search-input-container {
    flex-direction: column;
    gap: 8px;
  }

  .btn-search-action {
    width: 100%;
    justify-content: center;
    padding: 14px 24px;
  }

  .search-input-field {
    font-size: 14px;
    padding: 14px 8px;
  }

  .search-results-info {
    padding: 10px 12px;
  }

  .search-results-info span {
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  .search-icon-title {
    flex-direction: column;
    gap: 8px;
  }

  .search-input-wrapper {
    padding: 0 12px;
  }

  .search-input-field::placeholder {
    font-size: 13px;
  }
}
</style>

<!-- Script para mostrar/ocultar el buscador -->

      <div id="admin-loading" class="loading">
        <div class="spinner"></div>
        <p>Cargando datos...</p>
      </div>

      <div id="admin-rifa-grid" class="rifa-grid" style="display:none;"></div>
      <div id="admin-data-display" class="data-display-section" style="display:none;">
  <div class="data-tabs">
    <button class="tab-button active" onclick="switchTab('reservados')">
      <span class="material-icons" style="font-size: 18px; vertical-align: middle;">schedule</span>
      Reservados (<span id="count-reservados">0</span>)
    </button>
    <button class="tab-button" onclick="switchTab('pagados')">
      <span class="material-icons" style="font-size: 18px; vertical-align: middle;">check_circle</span>
      Pagados (<span id="count-pagados">0</span>)
    </button>
  </div>

  <div class="search-box">
    <input type="text" id="search-input" placeholder="Buscar por nombre, email, DNI o n√∫mero...">
    <span class="material-icons">search</span>
  </div>

  <div class="export-buttons" style="gap: 0.5rem;">
    <button class="btn-export btn-export-excel" onclick="exportToExcel()" style="border-radius: 999px; padding: 10px 28px;">
      <span class="material-icons" style="font-size: 18px;">table_chart</span>
      Exportar Excel
    </button>
    <button id="btn-export-pdf" class="btn-export btn-export-pdf" style="border-radius: 999px; padding: 10px 28px;">
      <span class="material-icons">picture_as_pdf</span>
      Exportar PDF
    </button>
    <button class="btn-export" onclick="enviarEmailsMasivos()" style="border-radius: 999px; padding: 10px 28px; background: linear-gradient(135deg, #6750A4, #7E57C2); color: white; border: none;">
      <span class="material-icons" style="font-size: 18px;">forward_to_inbox</span>
      Enviar Emails Pendientes
    </button>
  </div>

<div id="tabla-participantes" style="margin-top: 24px; display: none;">
  <div class="card" style="padding: 20px;">
    <h3 style="color: var(--md-sys-color-primary);">üìã Participantes</h3>
    <div style="overflow-x: auto;">
      <table id="tabla-lista"></table>
    </div>
  </div>
</div>
<div class="data-table-container">
  <table class="data-table">
    <thead>
      <tr>
        <th>N¬∫</th>
        <th>Nombre</th>
        <th>Email</th>
        <th>DNI</th>
        <th>Estado</th>
        <th>N¬∫ Operaci√≥n</th>
        <th>Fecha</th>
        <th>Email Enviado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody id="data-table-body">
      <!-- Los datos se cargar√°n din√°micamente -->
    </tbody>
  </table>
</div>
</div>
    </div>
  </div>

  <!-- Modal Reserva P√∫blica -->
  <div id="public-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Reservar N√∫mero <span id="public-modal-numero"></span></h3>
        <button class="close-btn" onclick="closePublicModal()">√ó</button>
      </div>
      <form id="public-form">
        <div class="form-group">
          <label for="public-nombre-input">Tu Nombre Completo *</label>
          <input type="text" id="public-nombre-input" placeholder="Ej: Juan P√©rez" required>
        </div>
        <div class="form-group">
          <label for="public-email-input">Tu Email (opcional)</label>
          <input type="email" id="public-email-input" placeholder="tu@email.com">
        </div>
       <div class="form-group">
          <label for="public-dni-input">Tu DNI *</label>
          <input type="number" id="public-dni-input" placeholder="Tu DNI" required>
        </div>
        <!-- Info-box eliminado para evitar duplicidad visual -->
        
        <div class="modal-actions">
          <div class="btn-group-mobile">
            <button type="submit" class="md-button btn-primary">
              <span class="material-icons">check_circle</span>
              Confirmar Reserva
            </button>
            <button type="button" class="md-button btn-secondary" onclick="closePublicModal()">
              Cancelar
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
<!-- ‚úÖ CORRECTO: -->
<div id="admin-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Editar N√∫mero <span id="admin-modal-numero"></span></h3>
        <button class="close-btn" onclick="closeAdminModal()">√ó</button>
      </div>
      <form id="admin-form">
        <!-- ... campos del formulario ... -->
           <div class="form-group">
          <label for="admin-nombre-input">Nombre del Participante</label>
          <input type="text" id="admin-nombre-input" placeholder="Ingrese el nombre">
        </div>
        <div class="form-group">
          <label for="admin-email-input">Email (opcional)</label>
          <input type="email" id="admin-email-input" placeholder="email@ejemplo.com">
        </div>
        <div class="form-group">
          <label for="admin-dni-input">DNI del Pagador</label>
          <input type="number" id="admin-dni-input" placeholder="Ingrese el DNI">
        </div>
        <!-- Campo nro_op oculto - se mantiene en BD pero no se usa en el form -->
        <input type="hidden" id="admin-nro_op-input">

        <!-- Campo oculto para registrar qui√©n ingres√≥ la operaci√≥n -->
        <input type="hidden" id="admin-registrado" name="admin_registrado" value="">

        <div class="form-group">
          <label for="admin-estado-select">Estado</label>
          <select id="admin-estado-select">
            <option value="1">Disponible</option>
            <option value="2">Reservado</option>
            <option value="3">Pagado ‚úì</option>
          </select>
        </div>
        <div class="modal-actions">
          <button type="submit" class="md-button btn-primary">
            <span class="material-icons">save</span>
            Guardar Cambios
          </button>
          
          <!-- ‚úÖ AGREGAR AQU√ç EL BOT√ìN DE HISTORIAL -->
          <button type="button" class="md-button btn-secondary" 
                  onclick="verHistorialNumero(currentEditingId)">
            <span class="material-icons">history</span>
            Ver Historial
          </button>
          
          <button type="button" class="md-button btn-secondary" 
                  onclick="closeAdminModal()">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- ========================================
       MODAL DE RESERVA MASIVA
       ======================================== -->
  <div id="modal-reserva-masiva" class="modal">
    <div class="modal-content" style="max-width: 650px;">
      <div class="modal-header">
        <h3>üéØ Reserva Masiva de N√∫meros</h3>
        <button class="close-btn" onclick="cerrarModalMasivo()">√ó</button>
      </div>
      
      <div style="background: #E8F5E9; border-left: 4px solid #4CAF50; padding: 12px; border-radius: 8px; margin-bottom: 20px;">
        <p style="margin: 0; color: #2E7D32; font-size: 14px;">
          ‚ú® <strong>Reserva varios n√∫meros a la vez</strong><br>
          <span style="font-size: 12px; color: #558B2F;">Ingresa tus datos una sola vez y selecciona todos los n√∫meros que desees</span>
        </p>
      </div>
      
      <form id="form-reserva-masiva">
        <div class="form-group">
          <label for="masivo-nombre-input">Tu Nombre Completo *</label>
          <input type="text" id="masivo-nombre-input" placeholder="Ej: Juan P√©rez" required>
        </div>
        
        <div class="form-group">
          <label for="masivo-email-input">Tu Email (opcional)</label>
          <input type="email" id="masivo-email-input" placeholder="tu@email.com">
        </div>
        
        <div class="form-group">
          <label for="masivo-dni-input">Tu DNI *</label>
          <input type="number" id="masivo-dni-input" placeholder="Tu DNI" required>
        </div>
        
        <div class="form-group">
          <label>N√∫meros Disponibles para Reservar</label>
          <div id="numeros-disponibles-masivo" style="
            max-height: 350px;
            overflow-y: auto;
            border: 2px solid #E7E0EC;
            border-radius: 12px;
            padding: 12px;
            background: #f9f9f9;
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
          ">
            <!-- Se llenar√°n din√°micamente -->
          </div>
          
          <div id="numeros-seleccionados-info" style="
            margin-top: 12px;
            padding: 12px;
            background: #E8DEF8;
            border-radius: 8px;
            text-align: center;
            display: none;
          ">
            <strong style="color: #6750A4;">N√∫meros seleccionados: <span id="count-seleccionados">0</span></strong>
          </div>
        </div>
        
        <div class="modal-actions" style="
          position: sticky;
          bottom: 0;
          background: white;
          padding: 16px 0;
          margin: 0 -24px -24px -24px;
          padding-left: 24px;
          padding-right: 24px;
          border-top: 1px solid #E7E0EC;
          box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
        ">
          <button type="submit" class="md-button btn-primary">
            <span class="material-icons">check_circle</span>
            Reservar N√∫meros Seleccionados
          </button>
          <button type="button" class="md-button btn-secondary" onclick="cerrarModalMasivo()">
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
 
</section>




<!-- ============================================
     REEMPLAZAR SECCIONES DE CONTACTO Y UBICACI√ìN
     en rifa.html
     ============================================ -->

<!-- ESTILOS MEJORADOS -->
<style>
/* Secci√≥n de Contacto Mejorada */
.contacto-section {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  padding: 60px 0;
}

.contacto-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: 0 auto;
}

.contacto-card {
  background: white;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  transition: all 0.3s;
}

.contacto-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

.contacto-card h4 {
  color: #6750A4;
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 25px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.contact-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.contact-list li {
  display: flex;
  align-items: flex-start;
  gap: 15px;
  padding: 15px;
  margin-bottom: 12px;
  background: linear-gradient(135deg, #f5f5f5, #fafafa);
  border-radius: 12px;
  transition: all 0.3s;
}

.contact-list li:hover {
  background: linear-gradient(135deg, #E8DEF8, #f0ebf8);
  transform: translateX(5px);
}

.contact-list li a {
  text-decoration: none;
  color: inherit;
  display: flex;
  align-items: flex-start;
  gap: 15px;
  width: 100%;
}

.icono-contacto {
  color: #6750A4;
  font-size: 28px !important;
  background: white;
  padding: 8px;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(103, 80, 164, 0.2);
  flex-shrink: 0;
}

.texto-contacto {
  flex: 1;
  line-height: 1.6;
}

.texto-contacto strong {
  display: block;
  color: #6750A4;
  font-weight: 600;
  margin-bottom: 4px;
}

/* Formulario de Contacto Mejorado */
.contact-form {
  background: white;
  padding: 10px;
  border-radius: 16px;
}

.contact-form .form-control {
  border: 2px solid #E7E0EC;
  border-radius: 12px;
  padding: 14px 16px;
  font-size: 15px;
  transition: all 0.3s;
}

.contact-form .form-control:focus {
  border-color: #6750A4;
  box-shadow: 0 0 0 3px rgba(103, 80, 164, 0.1);
  outline: none;
}

.contact-form textarea {
  resize: vertical;
  min-height: 120px;
}

.btn-md3 {
  background: linear-gradient(135deg, #6750A4, #4527A0);
  color: white;
  border: none;
  border-radius: 12px;
  padding: 14px 28px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
}

.btn-md3:hover {
  background: linear-gradient(135deg, #4527A0, #311B92);
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(103, 80, 164, 0.4);
}

.btn-md3 .material-icons {
  font-size: 20px;
}

/* Secci√≥n de Ubicaci√≥n Mejorada */
.ubicacion-section {
  /* background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); */
  padding: 60px 0;
}

.ubicacion-container {
  max-width: 1000px;
  margin: 0 auto;
}

.map-card {
  background: white;
  border-radius: 24px;
  padding: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  overflow: hidden;
}

.iframe-container {
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  margin-bottom: 20px;
}

.iframe-container iframe {
  display: block;
  border: none;
}

.direccion-display {
  background: linear-gradient(135deg, #E8DEF8, #f0ebf8);
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 20px;
  text-align: center;
}

.direccion-display p {
  margin: 0;
  color: #333;
  font-size: 16px;
  line-height: 1.6;
}

.direccion-display strong {
  color: #6750A4;
  font-size: 18px;
  display: block;
  margin-bottom: 8px;
}

.btn-como-llegar {
  background: linear-gradient(135deg, #4CAF50, #45a049);
  color: white;
  border: none;
  border-radius: 50px;
  padding: 16px 32px;
  font-size: 16px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
}

.btn-como-llegar:hover {
  background: linear-gradient(135deg, #45a049, #3d8b40);
  transform: translateY(-3px);
  box-shadow: 0 6px 25px rgba(76, 175, 80, 0.5);
}

/* Responsive */
@media (max-width: 768px) {
  .contacto-section,
  .ubicacion-section {
    padding: 40px 0;
  }

  .contacto-grid {
    grid-template-columns: 1fr;
    gap: 20px;
  }

  .contacto-card {
    padding: 20px;
  }

  .contact-list li {
    padding: 12px;
  }

  .icono-contacto {
    font-size: 24px !important;
    padding: 6px;
  }

  .btn-md3,
  .btn-como-llegar {
    padding: 12px 24px;
    font-size: 15px;
  }

  .direccion-display {
    padding: 15px;
  }
}
</style>

<!-- SECCI√ìN DE CONTACTO MEJORADA -->
<section id="CONTACTO" class="section-header">
  <h2 class="md3-headline" style="color: white;">
    <i class="material-icons align-middle" style="font-size:1.4em;">phone</i> Contacto<img src="./rifa/contacto2.png" alt="Contacto" style="height: 2em; vertical-align: middle; margin-left: 0.3em; filter: brightness(1.2) contrast(1.1); animation: erratic-walk 3s ease-in-out infinite;">

    <style>
    @keyframes erratic-walk {
      0%, 100% { transform: translateX(0) translateY(0) rotate(0deg); }
      10% { transform: translateX(-3px) translateY(-2px) rotate(-5deg); }
      20% { transform: translateX(4px) translateY(3px) rotate(3deg); }
      30% { transform: translateX(-2px) translateY(-4px) rotate(-8deg); }
      40% { transform: translateX(5px) translateY(2px) rotate(6deg); }
      50% { transform: translateX(-4px) translateY(4px) rotate(-4deg); }
      60% { transform: translateX(3px) translateY(-3px) rotate(7deg); }
      70% { transform: translateX(-5px) translateY(2px) rotate(-6deg); }
      80% { transform: translateX(4px) translateY(-2px) rotate(5deg); }
      90% { transform: translateX(-3px) translateY(3px) rotate(-3deg); }
    }
    </style>
  </h2>
</section>

<section id="contacto" class="contacto-section">
  <div class="container">
    <div class="contacto-grid">
      
      <!-- Informaci√≥n de Contacto -->
      <div class="contacto-card">
        <h4>
          <i class="material-icons">info</i>
          Informaci√≥n de Contacto
        </h4>
        <ul class="contact-list">
          <li>
            <a href="https://maps.google.com/maps?ll=-34.852837,-58.090878&z=16&t=m&hl=es-419&gl=AR&mapclient=embed&cid=14552632988079411306" 
               target="_blank" 
               rel="noopener noreferrer">
              <i class="material-icons icono-contacto">location_on</i>
              <span class="texto-contacto">
                <strong>Direcci√≥n</strong>
                Calle 8, N¬∫ 1950<br>
                Villa Elisa, Provincia de Buenos Aires<br>
                Argentina
              </span>
            </a>
          </li>
          
          <li>
            <a href="tel:+542215947600">
              <i class="material-icons icono-contacto">phone</i>
              <span class="texto-contacto">
                <strong>Tel√©fono</strong>
                +54 221 594-7600
              </span>
            </a>
          </li>
          
          <li>
            <a href="mailto:sanluisvillaelisa@gmail.com">
              <i class="material-icons icono-contacto">email</i>
              <span class="texto-contacto">
                <strong>Email</strong>
                sanluisvillaelisa@gmail.com
              </span>
            </a>
          </li>
        </ul>
      </div>
      
      <!-- Formulario de Contacto -->
      <div class="contacto-card" id="formulario-contacto">
        <h4>
          <i class="material-icons">mail_outline</i>
          Env√≠anos un Mensaje
        </h4>
        <form action="https://formspree.io/f/mvgzbwre" method="POST" class="contact-form">
          <div class="mb-3">
            <input type="text" 
                   class="form-control" 
                   name="name" 
                   placeholder="Tu Nombre Completo" 
                   required>
          </div>
          <div class="mb-3">
            <input type="email" 
                   class="form-control" 
                   name="_replyto" 
                   placeholder="Tu Email" 
                   required>
          </div>
          <div class="mb-3">
            <textarea class="form-control" 
                      name="message" 
                      rows="4" 
                      placeholder="Tu Mensaje" 
                      required></textarea>
          </div>
          <button type="submit" class="btn-md3">
            <i class="material-icons">send</i> 
            Enviar Mensaje
          </button>
        </form>
      </div>
      
    </div>
  </div>
</section>

<!-- SECCI√ìN DE UBICACI√ìN MEJORADA -->
<section id="UBICACION" class="section-header">
  <h2 class="md3-headline" style="color: white;">
    <i class="material-icons align-middle" style="font-size:1.4em;">place</i>
    Ubicaci√≥n<img src="./rifa/ubicacion.png" alt="Ubicaci√≥n" style="height: 2em; vertical-align: middle; margin-left: 0.3em; filter: brightness(1.2) contrast(1.1); animation: bounce-spin 2s ease-in-out infinite;">

    <style>
    @keyframes bounce-spin {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      25% { transform: translateY(-10px) rotate(15deg); }
      50% { transform: translateY(0) rotate(0deg); }
      75% { transform: translateY(-10px) rotate(-15deg); }
    }
    </style>
  </h2>
</section>

<section id="ubicacion" class="ubicacion-section">
  <div class="container">
    <div class="ubicacion-container">
      <div class="map-card">
        
        <!-- Direcci√≥n Destacada -->
        <div class="direccion-display">
          <strong>üìç Parroquia San Luis Gonzaga</strong>
          <p style="line-height:1; margin:0;">
            Calle 8, N¬∫ 1950<br>
            Villa Elisa, La Plata<br>
            Buenos Aires, Argentina
          </p>
        </div>

        <!-- Mapa de Google -->
        <div class="iframe-container">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3002.393485373286!2d-58.09356284990616!3d-34.85287746264052!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95a2ded64133dd97%3A0xc9f55699791ad06a!2sParroquia%20San%20Luis%20Gonzaga!5e0!3m2!1ses-419!2sar!4v1737488346882!5m2!1ses-419!2sar"
            width="100%" 
            height="400" 
            style="border:0;" 
            allowfullscreen="" 
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>

        <!-- Bot√≥n de C√≥mo Llegar -->
        <div class="text-center">
          <button id="btn-como-llegar" class="btn-como-llegar">
            <i class="material-icons">directions</i> 
            C√≥mo Llegar
          </button>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- SCRIPT PARA BOT√ìN "C√ìMO LLEGAR" -->
<script>
document.getElementById('btn-como-llegar').addEventListener('click', function() {
  // Coordenadas de la parroquia
  const lat = -34.852877;
  const lng = -58.090878;
  
  // Detectar si es m√≥vil
  const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
  
  let url;
  if (isMobile) {
    // En m√≥vil: abrir app de Google Maps o Apple Maps
    if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {
      // iOS: intenta Apple Maps primero, si no Google Maps
      url = `maps://maps.google.com/maps?daddr=${lat},${lng}`;
      setTimeout(() => {
        window.location = `https://maps.google.com/maps?daddr=${lat},${lng}`;
      }, 500);
    } else {
      // Android: Google Maps
      url = `https://maps.google.com/maps?daddr=${lat},${lng}`;
    }
  } else {
    // En desktop: abrir Google Maps en nueva pesta√±a
    url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
  }
  
  window.open(url, '_blank');
});
</script>

<footer class="footer bg-dark text-light py-5 text-center">
  <div class="container">
    <img src="./img/IsoTipo-2-SanLuisGonzaga-Amarillo.png" alt="" style="max-width: 320px">
    <br><br>
    <div class="row justify-content-center">
      <div class="col-md-4 mb-4 mb-md-0">
        <h5 class="footer-title">Parroquia San Luis Gonzaga</h5>
        <p class="footer-text">Villa Elisa, Argentina</p>
      </div>
      <div class="col-md-4 mb-4 mb-md-0">
        <h5 class="footer-title">Enlaces R√°pidos</h5>
        <ul class="footer-links">
          <li><a href="#inicio" class="footer-link">Inicio</a></li>
          <li><a href="#misas" class="footer-link">Horarios de Misas</a></li>
          <li><a href="#contacto" class="footer-link">Contacto</a></li>
        </ul>
      </div>
      <div class="col-md-4">
        <h5 class="footer-title">S√≠guenos</h5>
        <div class="footer-social-icons d-flex flex-column align-items-center">
          <a href="https://www.facebook.com/profile.php?id=100089942000666" target="_blank" class="social-link mb-2">
            <i class="fab fa-facebook-f"></i>
            <span>Facebook Parroquial</span>
          </a>
          <a href="https://www.instagram.com/parroquiasanluisgonzaga_?igsh=MWs4cTgyMGJnZnI0OA==" target="_blank" class="social-link mb-2">
            <i class="fab fa-instagram"></i>
            <span>Instagram Parroquial</span>
          </a>
        </div>
      </div>
    </div>
    <div class="text-center mt-4">
      <p class="footer-copyright">&copy; 2026 Parroquia San Luis Gonzaga - Todos los Derechos Reservados.</p>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>

<script src="./pdf.js"></script>
<!-- Inicializaci√≥n del Sistema de Cifrado -->
<script>
// Esperar a que Firebase est√© listo antes de cargar datos cifrados
window.addEventListener('load', function() {
  console.log('üîê Preparando sistema de cifrado...');
  
  // Esperar a que db est√© disponible
  function intentarInicializarCifrado(intentos) {
    if (intentos <= 0) {
      console.warn('‚ö†Ô∏è Sistema de cifrado: Firebase no disponible despu√©s de varios intentos');
      console.log('‚ÑπÔ∏è La p√°gina continuar√° funcionando sin datos de pago cifrados');
      return;
    }
    
    if (typeof db === 'undefined' || typeof window.SistemaCifrado === 'undefined') {
      console.log('‚è≥ Esperando Firebase y Sistema de Cifrado... (intentos restantes: ' + intentos + ')');
      setTimeout(() => intentarInicializarCifrado(intentos - 1), 1000);
      return;
    }
    
    console.log('‚úÖ Firebase y Sistema de Cifrado disponibles, inicializando...');
    
    // Renderizar header con datos cifrados
    window.SistemaCifrado.renderizarHeaderRifa()
      .then(function() {
        console.log('‚úÖ Header cargado con datos de pago');
      })
      .catch(function(error) {
        console.error('‚ùå Error al cargar header cifrado:', error);
        // Mostrar mensaje en el contenedor
        const container = document.querySelector('.rifa-header-redesign');
        if (container) {
          console.log('‚ÑπÔ∏è Mostrando mensaje de error en el header');
        }
      });
    
    // Configurar bot√≥n admin
    var btnActualizar = document.getElementById('btn-actualizar-datos-pago');
    
    if (btnActualizar) {
      btnActualizar.onclick = function() {
        if (typeof window.SistemaCifrado !== 'undefined') {
          window.SistemaCifrado.mostrarPanelActualizarDatosPago();
        } else {
          Swal.fire({
            icon: 'warning',
            title: 'No Disponible',
            text: 'El sistema de cifrado no est√° disponible'
          });
        }
      };
      
      // Mostrar solo a admins
      if (typeof auth !== 'undefined') {
        auth.onAuthStateChanged(function(user) {
          if (user && typeof esAdmin === 'function') {
            esAdmin(user.email)
              .then(function(isAdminUser) {
                if (isAdminUser && btnActualizar) {
                  btnActualizar.style.display = 'inline-flex';
                  console.log('‚úÖ Bot√≥n de actualizaci√≥n de datos de pago visible para admin');
                }
              })
              .catch(function(error) {
                console.error('Error verificando admin:', error);
              });
          }
        });
      }
    }
  }
  
  // Iniciar intentos (20 intentos = 20 segundos)
  intentarInicializarCifrado(20);
});
</script>

<!-- Cargar rifa.js al final del body, ANTES del sistema de verificaci√≥n QR -->
<script src="./rifa.js"></script>

<script>
  // ========================================
// SISTEMA DE VERIFICACI√ìN QR
// Agregar al final de rifa.html (antes del </body>)
// ========================================

(function() {
  'use strict';

  // ========================================
  // VERIFICAR SI VIENE DESDE UN QR
  // ========================================
  function verificarDesdeQR() {
    const params = new URLSearchParams(window.location.search);
    const numeroVerificar = params.get('verificar');
    
    if (!numeroVerificar) return; // No viene desde QR
    
    console.log('üîç Verificando n√∫mero desde QR:', numeroVerificar);
    
    // Esperar a que la grilla est√© cargada
    const intentarVerificar = setInterval(() => {
      if (window.rifaData && window.rifaData.length > 0) {
        clearInterval(intentarVerificar);
        procesarVerificacion(numeroVerificar);
      }
    }, 100);
    
    // Timeout de seguridad (5 segundos)
    setTimeout(() => {
      clearInterval(intentarVerificar);
    }, 5000);
  }

  // ========================================
  // PROCESAR VERIFICACI√ìN
  // ========================================
  function procesarVerificacion(numeroStr) {
    const numero = parseInt(numeroStr);
    
    // Buscar el n√∫mero en los datos
    const ticket = window.rifaData.find(item => 
      parseInt(item.numero) === numero
    );
    
    if (!ticket) {
      mostrarResultadoVerificacion(null, numeroStr);
      return;
    }
    
    // Scroll hacia el n√∫mero
    scrollHaciaNumero(numero);
    
    // Mostrar resultado despu√©s de un momento
    setTimeout(() => {
      mostrarResultadoVerificacion(ticket, numeroStr);
    }, 800);
  }

  // ========================================
  // SCROLL HACIA EL N√öMERO
  // ========================================
  function scrollHaciaNumero(numero) {
    // Buscar la tarjeta del n√∫mero
    const cards = document.querySelectorAll('.numero-card');
    
    for (let card of cards) {
      const cardNumero = card.querySelector('.numero-texto');
      if (cardNumero && parseInt(cardNumero.textContent) === numero) {
        // Scroll suave
        card.scrollIntoView({ 
          behavior: 'smooth', 
          block: 'center' 
        });
        
        // Efecto visual de highlight
        card.style.animation = 'highlight-pulse 2s ease-in-out';
        
        // Crear animaci√≥n si no existe
        if (!document.getElementById('highlight-pulse-style')) {
          const style = document.createElement('style');
          style.id = 'highlight-pulse-style';
          style.textContent = `
            @keyframes highlight-pulse {
              0%, 100% { 
                transform: scale(1); 
                box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
              }
              50% { 
                transform: scale(1.05); 
                box-shadow: 0 8px 24px rgba(103, 80, 164, 0.4); 
              }
            }
          `;
          document.head.appendChild(style);
        }
        
        break;
      }
    }
  }

  // ========================================
  // MOSTRAR RESULTADO DE VERIFICACI√ìN
  // ========================================
  function mostrarResultadoVerificacion(ticket, numeroStr) {
    if (!ticket) {
      // N√∫mero no encontrado o disponible
      Swal.fire({
        icon: 'info',
        title: 'üîç N√∫mero Verificado',
        html: `
          <div style="padding: 20px;">
            <p style="font-size: 18px; margin-bottom: 16px;">
              <strong>N√∫mero:</strong> <span style="color: #6750A4; font-size: 24px;">${numeroStr.padStart(3, '0')}</span>
            </p>
            <p style="font-size: 16px; color: #666;">
              ‚úÖ Este n√∫mero est√° <strong>DISPONIBLE</strong><br>
              ¬°Pod√©s reservarlo ahora!
            </p>
          </div>
        `,
        confirmButtonText: 'Entendido',
        confirmButtonColor: '#6750A4'
      });
      return;
    }

    // Determinar estado
    let estadoHtml = '';
    let iconEstado = '';
    let colorEstado = '';
    
    switch(ticket.state) {
      case 3: // Pagado
        iconEstado = '‚úÖ';
        colorEstado = '#4CAF50';
        estadoHtml = '<strong style="color: #4CAF50;">PAGADO Y CONFIRMADO</strong>';
        break;
      case 2: // Reservado
        iconEstado = '‚è∞';
        colorEstado = '#FF9800';
        estadoHtml = '<strong style="color: #FF9800;">RESERVADO</strong>';
        break;
      case 1: // Vendido
        iconEstado = 'üéüÔ∏è';
        colorEstado = '#2196F3';
        estadoHtml = '<strong style="color: #2196F3;">VENDIDO</strong>';
        break;
      default:
        iconEstado = '‚ùì';
        colorEstado = '#999';
        estadoHtml = '<strong>ESTADO DESCONOCIDO</strong>';
    }

    // Formatear fecha
    let fechaTexto = 'No disponible';
    if (ticket.time && ticket.time.seconds) {
      const fecha = new Date(ticket.time.seconds * 1000);
      fechaTexto = fecha.toLocaleDateString('es-AR', {
        day: '2-digit',
        month: '2-digit',
        year: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    }

    // Mostrar informaci√≥n del ticket
    Swal.fire({
      icon: 'success',
      title: `${iconEstado} Ticket Verificado`,
      html: `
        <div style="padding: 20px; text-align: left;">
          <div style="text-align: center; margin-bottom: 24px;">
            <div style="display: inline-block; background: ${colorEstado}; color: white; padding: 12px 32px; border-radius: 24px; font-size: 20px; font-weight: bold;">
              N¬∫ ${numeroStr.padStart(3, '0')}
            </div>
          </div>
          
          <div style="background: #f5f5f5; padding: 16px; border-radius: 12px; margin-bottom: 16px;">
            <p style="margin: 8px 0; font-size: 15px;">
              <strong>üë§ Participante:</strong> ${ticket.nombre || 'No disponible'}
            </p>
            <p style="margin: 8px 0; font-size: 15px;">
              <strong>üìÖ Fecha:</strong> ${fechaTexto}
            </p>
            <p style="margin: 8px 0; font-size: 15px;">
              <strong>üéØ Estado:</strong> ${estadoHtml}
            </p>
          </div>

          ${ticket.state === 3 ? `
            <div style="background: #e8f5e9; border-left: 4px solid #4CAF50; padding: 12px; border-radius: 6px; margin-top: 16px;">
              <p style="margin: 0; color: #2e7d32; font-size: 14px;">
                ‚úì Este ticket est√° confirmado y participar√° del sorteo
              </p>
            </div>
          ` : ''}
          
          ${ticket.state === 2 ? `
            <div style="background: #fff3e0; border-left: 4px solid #FF9800; padding: 12px; border-radius: 6px; margin-top: 16px;">
              <p style="margin: 0; color: #e65100; font-size: 14px;">
                ‚ö†Ô∏è Reserva pendiente de confirmaci√≥n de pago
              </p>
            </div>
          ` : ''}
        </div>
      `,
      confirmButtonText: 'Cerrar',
      confirmButtonColor: '#6750A4',
      width: '500px'
    });

    // Limpiar la URL sin recargar la p√°gina
    setTimeout(() => {
      const url = new URL(window.location);
      url.searchParams.delete('verificar');
      window.history.replaceState({}, '', url);
    }, 2000);
  }

  // ========================================
  // INICIALIZAR AL CARGAR LA P√ÅGINA
  // ========================================
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', verificarDesdeQR);
  } else {
    verificarDesdeQR();
  }

  console.log('‚úÖ Sistema de verificaci√≥n QR inicializado');

})();
</script>
</body>
</html>